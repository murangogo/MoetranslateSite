<!DOCTYPE HTML>
<html>
	<head>
		<title>萌译 - MoeTranslate</title>
		<meta charset="utf-8" />
		<meta name="baidu-site-verification" content="codeva-2LTt5Z0l4f" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="logo">
							<img src="icon.png" alt="My Icon">
						</div>
						<div class="content">
							<div class="inner">
								<h1>萌译v3.0.5 MoeTranslate</h1>
								<p>让您和非中文游戏的距离不再遥远。</p>
								<p>Download: <span id="downloadCount">Loading...</span></p>
							</div>
						</div>
						<nav>
							<ul>
								<li><a href="https://space.bilibili.com/151100964">B站空间</a></li>
								<li><a href="https://www.123pan.com/s/2f38Vv-5o4zH.html" id="downloadLink">下载</a></li>
								<li><a href="#work">测试版</a></li>
								<li><a href="#about">微信公众号</a></li>
								<li><a href="https://github.com/murangogo/MoeTranslate">Git Hub</a></li>
							</ul>
						</nav>
					</header>

				<!-- Main -->
					<div id="main">

						<!-- Intro -->
							<article id="intro">
								<h2 class="major">Intro</h2>
								<p>Aenean ornare velit lacus, ac varius enim ullamcorper eu. Proin aliquam facilisis ante interdum congue. Integer mollis, nisl amet convallis, porttitor magna ullamcorper, amet egestas mauris. Ut magna finibus nisi nec lacinia. Nam maximus erat id euismod egestas. By the way, check out my <a href="#work">awesome work</a>.</p>
								<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis dapibus rutrum facilisis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam tristique libero eu nibh porttitor fermentum. Nullam venenatis erat id vehicula viverra. Nunc ultrices eros ut ultricies condimentum. Mauris risus lacus, blandit sit amet venenatis non, bibendum vitae dolor. Nunc lorem mauris, fringilla in aliquam at, euismod in lectus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In non lorem sit amet elit placerat maximus. Pellentesque aliquam maximus risus, vel sed vehicula.</p>
							</article>

						<!-- Work -->
							<article id="work">
								<h2 class="major">测试版</h2>
								<p>开发者正在开发4.0.0版本！想看看新版本是什么样就来下载吧！</p>
								<p>注意，测试版可能有Bug哦！</p>
								<nav>
									<ul>
										<li><a href="https://www.123pan.com/s/2f38Vv-uNpzH.html" id="downloadLink2">下载测试版⬅点我下载！</a></li>
									</ul>
								</nav>
							</article>

						<!-- About -->
							<article id="about">
								<h2 class="major">微信公众号</h2>
								<span><img src="images/pic03.jpg" alt="公众号图片" /></span>
								<p>截图扫一扫就能关注啦！</p>
							</article>
					</div>

				<!-- Footer -->
					<footer id="footer">
						<p class="copyright">&copy; 很多时候不懂事</p>
					</footer>

			</div>

		<!-- BG -->
			<div id="bg"></div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script>
    document.getElementById('downloadLink').addEventListener('click', function(event) {
    event.preventDefault();
    const downloadUrl = this.href;
    fetch('https://battle.moetranslate.top/api/updatecount?type=update&permission=.7295.')
    .then(response => {
        if(response.ok) {
            window.location.href = downloadUrl;
        } else {
			window.location.href = downloadUrl;
            console.error('更新失败');
        }
    })
	.catch(error => {
            // 处理连接错误
            console.error('请求错误', error);
        });
});

document.getElementById('downloadLink2').addEventListener('click', function(event) {
    event.preventDefault();
    const downloadUrl = this.href;
    fetch('https://battle.moetranslate.top/api/updatecount?type=update&permission=.7295.')
    .then(response => {
        if(response.ok) {
            window.location.href = downloadUrl;
        } else {
			window.location.href = downloadUrl;
            console.error('更新失败');
        }
    })
	.catch(error => {
            // 处理连接错误
            console.error('请求错误', error);
        });
});

function loadDownloadCount() {
    fetch('https://battle.moetranslate.top/api/updatecount?type=check')
    .then(response => response.json())
    .then(data => {
        if(data.mynum !== undefined) {
            document.getElementById('downloadCount').textContent = data.mynum;
        } else {
            document.getElementById('downloadCount').textContent = 'Failed';
        }
    })
    .catch(error => {
        console.error('下载次数加载失败:', error);
        document.getElementById('downloadCount').textContent = 'Error';
    });
}

window.onload = function() {
    loadDownloadCount();
};
</script>


	</body>
</html>
